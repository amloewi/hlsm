\documentclass{article}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}

%\usepackage{fancyvrb}

\title{Math for Hierarchical Latent Space Models}
\date{\today}
\author{Octavio Mesner}
\begin{document}
\maketitle

% shortcuts
\newcommand\curly[1]{\left\{#1\right\}}
\newcommand\brac[1]{\left[#1\right]}
\newcommand\paren[1]{\left(#1\right)}
\newcommand\abs[1]{\left|#1\right|}
\newcommand\norm[1]{\left\|#1\right\|}
\newcommand\ang[1]{\left\langle#1\right\rangle}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\bone}{\mathbf{1}}
\newcommand{\calL}{\mathcal{L}}
%\DeclareMathOperator*{\argmin}{argmin}
\def\tr{\mathrm{tr}}

General formulation:
\begin{align*}
  \ell &= -\sum_k\sum_{i<j} \brac{y_{ijk} \ln \sigma_{ijk}
         + (1-y_{ijk})\ln (1-\sigma_{ijk})}\\
  \sigma_{ijk} &= \paren{1+\exp\curly{-\alpha_k + \norm{z_{ik} -
                 z_{jk}}_2^2}}^{-1}\\
  \frac{\partial \ell}{\partial z_{ik}}
       &= -\sum_k\sum_{ij}
         \brac{\frac{y_{ijk}}{\sigma_{ijk}}
         \frac{\partial\sigma_{ijk}}{\partial z_{ik}}
         - \frac{1-y_{ijk}}{1-\sigma_{ijk}}
         \frac{\partial\sigma_{ijk}}{\partial z_{ik}}}\\
  \frac{\partial \sigma_{ijk}}{\partial z_{ik}}
       &= \frac{\exp\curly{\alpha_k-\norm{z_{ik}-z_{jk}}_2^2}}
         {\paren{1+\exp\curly{\alpha_k - \norm{z_{ik} -
         z_{jk}}_2^2}}^2}
         \paren{2z_{ik} - z_{jk}}
\end{align*}
\end{document}